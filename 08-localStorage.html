<!DOCTYPE html>
<html>
  <head>
    <title>Rock-Paper-Scissors</title>
  </head>
  <body>
    <p>Rock Paper Scissors</p>
    <button onclick="
      //pickComputerMove();
      playGame('rock');
    " >Rock</button>
    <button onclick="
      //pickComputerMove();
      playGame('paper');
      
    ">Paper</button>
    <button onclick="
      //pickComputerMove();
      playGame('scissors');
      
      ">Scissors</button>
    <button onclick="
      score.wins=0;
      score.losses = 0;
      score.ties = 0;
      localStorage.removeItem('score');
    ">Reset Score</button>
      <script>
        // retrieving the score from local storage
        let score=JSON.parse(localStorage.getItem('score'));
        
        //to make reset function work, we are providing a default value of score   
        if (!score){
          score={
            wins:0,
            losses:0,
            ties:0
          }
        }
        //reset button will not work in this scenario because score is stored in local storage 
        //and every time we refresh the page it will take take the value of score from local 
        //storage(to check first reset then refresh)
        

        function playGame (playerMove) {
          const computerMove=pickComputerMove();
              let result='';
          if(playerMove==='paper'){
            if(computerMove==='rock'){
              result='You win';
              }
              else if(computerMove==='paper')
              {
                result='tie';
              }
              else{
                result='You lose';
              }
            }
            else if(playerMove==='rock'){
             
              if(computerMove==='rock'){
                  result='tie';
              }
              else if(computerMove==='paper')
              {
                result='You lose';
              }
              else{
                result='You win';
              }
             
            }
            else{
              
              if(computerMove==='rock'){
                result='You lose';
              }
              else if(computerMove==='paper')
              {
                result='You win';
              }
              else{
                result='tie';
              }

            }
            if(result==='You win'){
                score.wins+=1;  
              }
              else if(result==='You lose'){
                score.losses+=1;
              }
              else if (result==='tie'){
                score.ties+=1;
              }
              // adding the score to local storage
            localStorage.setItem('score',JSON.stringify(score));
              
            alert(`you picked ${playerMove}.computer picked ${computerMove}.${result}
            Wins:${score.wins},Losses:${score.losses},Ties:${score.ties}`);
          
        }
        
      
        
        //solution for error showing:computerMove not defined
        let computerMove='';

        function pickComputerMove(){
          const RandNum=Math.random();
         
          if(RandNum>=0 && RandNum<1/3)
            computerMove='rock';
          else if(RandNum>=1/3 && RandNum<2/3)
            computerMove='paper';
          else
            computerMove='scissors';
   //accessing a variable outside function without declaring it outside the function
          return computerMove;
       }
    </script>
  </body>
</html>